<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Encuesta</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- PWA iPad -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="stylesheet" href="/static/styles.css" />
  <style>
    :root { --bg:#0e0e10; --fg:#fff; --muted:#9aa0a6; --accent:#8b5cf6; --accent2:#22d3ee; }
    body { background:var(--bg); color:var(--fg); font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }
    .wrap { max-width: 640px; margin: 0 auto; padding: 24px 16px 40px; }
    h1 { font-size: 1.8rem; margin: 0 0 8px; }
    p.sub { color: var(--muted); margin: 0 0 16px; }
    .card { background: #141418; border: 1px solid #23232a; border-radius: 16px; padding: 20px; }
    .progress { width:100%; height: 8px; background:#1b1b20; border-radius:999px; overflow:hidden; margin: 8px 0 20px;}
    .progress > div { height:100%; width:0%; background: linear-gradient(90deg,var(--accent),var(--accent2)); transition: width .35s ease; }
    .q { min-height: 220px; display:none; opacity:0; transform: translateY(6px); transition: opacity .28s ease, transform .28s ease; }
    .q.active { display:block; opacity:1; transform: translateY(0); }
    .field { margin: 14px 0 8px; }
    label.lbl { display:block; font-weight:600; margin-bottom:10px; }
    select, input[type="text"], textarea {
      width:100%; background:#0f0f14; color:#fff; border:1px solid #2a2a33; border-radius:12px; padding:14px; font-size:1.05rem;
    }
    .choices { display:flex; gap:10px; flex-wrap: wrap; }
    .chip { padding:12px 16px; border:1px solid #2a2a33; border-radius:999px; cursor:pointer; user-select:none; }
    .chip[aria-pressed="true"] { background:#1f1f2a; border-color:#3b3b4a; }
    .nav { display:flex; justify-content:space-between; gap:10px; margin-top:12px; }
    .btn { flex:1; text-align:center; padding:14px 16px; border-radius:12px; border:1px solid #2a2a33; background:#171720; color:#fff; font-weight:600; font-size:1.05rem; }
    .btn.primary { background:linear-gradient(90deg,var(--accent),var(--accent2)); border:none; }
    .btn:disabled { opacity:.5; }
    .hint { color:var(--muted); font-size:.95rem; margin-top:6px; }
    .done { text-align:center; padding:40px 10px; }
    .tick { font-size:56px; line-height:1; margin-bottom:12px; }
    .lang-select { text-align:center; padding:10px 0 4px; }
    .lang-buttons { display:flex; flex-direction:column; gap:12px; margin-top:24px; }
    .lang-buttons .btn { width:100%; }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Encuesta</h1>
      <p class="sub" id="stepText">Selecciona un idioma / Hautatu hizkuntza / Choose a language</p>
      <div class="progress"><div id="bar"></div></div>
    </header>

    <section class="card">
      <!-- Aquí se inyecta cada paso desde survey.js según questions.json -->
      <div class="q active" data-step="0" id="stepHost"></div>

      <!-- Pantalla final -->
      <div class="q" data-step="done" id="done">
        <div class="done">
          <div class="tick">✅</div>
          <h2>¡Gracias!</h2>
          <p class="sub">Tu respuesta ha sido enviada.</p>
          <div class="nav" style="margin-top:16px">
            <button class="btn primary" id="again" type="button">Responder otra vez</button>
          </div>
        </div>
      </div>
    </section>

    <p class="hint" id="status" aria-live="polite" style="margin-top:10px"></p>
  </div>

  <!-- Tu lógica dinámica (carga /static/questions.json y pinta los pasos) -->
  <script src="/static/survey.js"></script>
</body>
</html>
